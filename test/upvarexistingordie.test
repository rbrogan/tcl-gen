package require tcltest
package require gen


::tcltest::test UpvarExistingOrDie-1 {Illustration} -body {
proc MyPrintVar {VarName} {  UpvarExistingOrDie $VarName Var; puts "$VarName = $Var" }
set abc 123
MyPrintVar abc

} -result {} -output {abc = 123
} -returnCodes {0}


::tcltest::test UpvarExistingOrDie-2 {No such variable} -body {
unset -nocomplain NoVariable
proc MyPrintVar {VarName} {  UpvarExistingOrDie $VarName Var; puts "$VarName = $Var" }
MyPrintVar NoVariable
} -result {Could not find variable NoVariable in caller.} -output {} -returnCodes {1}


::tcltest::test UpvarExistingOrDie-3 {Empty string input} -body {
UpvarExistingOrDie "" abc
} -result {Variable name is missing. Got empty string.} -output {} -returnCodes {1}


::tcltest::test UpvarExistingOrDie-4 {Empty string input 2} -body {
UpvarExistingOrDie abc ""
} -result {Second argument is missing. Got empty string.} -output {} -returnCodes {1}

